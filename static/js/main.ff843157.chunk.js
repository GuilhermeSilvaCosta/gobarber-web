(this["webpackJsonpgobarber-web"]=this["webpackJsonpgobarber-web"]||[]).push([[0],{123:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),o=t(21),c=t.n(o),i=t(25),u=t(76),l=t(31),s=t(29),p=t(7),d=t(8);function b(){var n=Object(p.a)(["\n    color: #fff;\n"]);return b=function(){return n},n}var f=d.c.p(b());var m=function(){return r.a.createElement(f,null,"Loading...")},h=t(26),g=t(40),v=t(48),x=t(35),E=t(64),O=t.n(E),j=v.a().shape({email:v.b().email("Insita um e-mail v\xe1lido").required("O e-mail \xe9 obrigatorio"),password:v.b().required("A senha \xe9 obrigat\xf3ria")});function y(){var n=Object(l.b)(),e=Object(l.c)((function(n){return n.auth.loading}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:O.a,alt:"GoBarber",style:{height:"64px",width:"64px"}}),r.a.createElement(g.a,{schema:j,onSubmit:function(e){var t=e.email,a=e.password;n(Object(x.b)(t,a))}},r.a.createElement(g.b,{name:"email",type:"email",placeholder:"Seu e-mail"}),r.a.createElement(g.b,{name:"password",type:"password",placeholder:"Sua senha secreta"}),r.a.createElement("button",{type:"submit"},e?"Carregando...":"Acessar"),r.a.createElement(h.a,{to:"/register"},"Criar conta gratuita")))}var w=t(50),k=t(49),S=t(90),_=t(89),I=t(17),U=t(85),F=t.n(U),P=t(45),R={token:null,signed:!1,loading:!1};var N={profile:null};var T=Object(I.c)({auth:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;return Object(P.a)(n,(function(n){switch(e.type){case"@auth/SIGN_IN_REQUEST":n.loading=!0;break;case"@auth/SIGN_IN_SUCCESS":n.token=e.payload.token,n.signed=!0,n.loading=!1;break;case"@auth/SIGN_FAILURE":n.loading=!1;break;case"@auth/SIGN_OUT":n.token=null,n.signed=!1}}))},user:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;return Object(P.a)(n,(function(n){switch(e.type){case"@auth/SIGN_IN_SUCCESS":n.profile=e.payload.user;break;case"@user/UPDATE_PROFILE_SUCCESS":n.profile=e.payload.profile;break;case"@auth/SIGN_OUT":n.profile=null}}))}}),z=t(14),A=t.n(z),G=t(11),C=t(22),D=t(15),L=Object(D.a)({basename:"/gobarber-web"}),Q=A.a.mark(q),B=A.a.mark(M);function q(n){var e,t,a,r,o,c,u;return A.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return e=n.payload,l.prev=1,t=e.email,a=e.password,l.next=5,Object(G.b)(C.a.post,"sessions",{email:t,password:a});case 5:if(r=l.sent,o=r.data,c=o.token,(u=o.user).provider){l.next=10;break}return i.b.error("Usu\xe1rio n\xe3o \xe9 prestador"),l.abrupt("return");case 10:return C.a.defaults.headers.Authorization="Bearer ".concat(c),l.next=13,Object(G.c)(Object(x.c)(c,u));case 13:L.push("/dashboard"),l.next=21;break;case 16:return l.prev=16,l.t0=l.catch(1),i.b.error("Falha na autentica\xe7\xe3o, verifique seus dados"),l.next=21,Object(G.c)(Object(x.a)());case 21:case"end":return l.stop()}}),Q,null,[[1,16]])}function M(n){var e,t,a,r;return A.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e=n.payload,o.prev=1,t=e.name,a=e.email,r=e.password,o.next=5,Object(G.b)(C.a.post,"users",{name:t,email:a,password:r,provider:!0});case 5:L.push("/"),o.next=13;break;case 8:return o.prev=8,o.t0=o.catch(1),i.b.error("Falha no cadastro, verifique seus dados!"),o.next=13,Object(G.c)(Object(x.a)());case 13:case"end":return o.stop()}}),B,null,[[1,8]])}var H=Object(G.a)([Object(G.d)("persist/REHYDRATE",(function(n){var e=n.payload;if(e&&e.auth){var t=e.auth.token;t&&(C.a.defaults.headers.Authorization="Bearer ".concat(t))}})),Object(G.d)("@auth/SIGN_IN_REQUEST",q),Object(G.d)("@auth/SIGN_UP_REQUEST",M),Object(G.d)("@auth/SIGN_OUT",(function(){L.push("/")}))]),J=t(34),Y=t(56),K=A.a.mark(V);function V(n){var e,t,a,r,o,c,u,l;return A.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e=n.payload,t=e.data,a=t.name,r=t.email,o=t.avatar_id,c=Object(w.a)(t,["name","email","avatar_id"]),u=Object(J.a)({name:a,email:r,avatar_id:o},c.oldPassword?c:{}),s.prev=3,s.next=6,Object(G.b)(C.a.put,"users",u);case 6:return l=s.sent,i.b.success("Perfil atualizado com sucesso!"),s.next=10,Object(G.c)(Object(Y.c)(l.data));case 10:s.next=17;break;case 12:return s.prev=12,s.t0=s.catch(3),i.b.error("Erro ao atualizar perfil, confira seus dados!"),s.next=17,Object(G.c)(Object(Y.a)());case 17:case"end":return s.stop()}}),K,null,[[3,12]])}var W=Object(G.a)([Object(G.d)("@user/UPDATE_PROFILE_REQUEST",V)]),X=A.a.mark(Z);function Z(){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(G.a)([H,W]);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),X)}var $,nn=Object(S.a)(),en=[nn],tn=function(n,e){var t=I.a.apply(void 0,Object(_.a)(e));return Object(I.e)(n,t)}(($=T,Object(k.a)({key:"gobarber",storage:F.a,whitelist:[]},$)),en),an=Object(k.b)(tn);nn.run(Z);var rn=t(42);function on(){var n=Object(p.a)(["\n    width: 100%;\n    max-width: 315px;\n    text-align: center;\n    \n    form {\n        display: flex;\n        flex-direction: column;\n        margin-top: 30px;\n\n        input {\n            background: rgba(0, 0, 0, 0.1);\n            border: 0;\n            border-radius: 4px;\n            height: 44px;\n            padding: 0 15px;\n            color: #FFF;\n            margin: 0 0 10px;\n\n            &::placeholder {\n                color: rgba(255, 255, 255, 0.7);\n            }\n        }\n\n        span {\n            color: #fb6f91;\n            align-self: flex-start;\n            margin: 0 0 10px;\n            font-weight: bold;\n        }\n\n        button {\n            margin: 5px 0 0;\n            height: 44px;\n            background: #3b9eff;\n            font-weight: bold;\n            color: #FFF;\n            border: 0;\n            border-radius: 4px;\n            font-size: 16px;\n            transition: backgound 0.2s;\n\n            &:hover {\n                background: ","\n            }\n\n        }\n\n        a {\n            color: #FFF;\n            margin-top: 15px;\n            font-size: 16px;\n            opacity: 0.8;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n"]);return on=function(){return n},n}function cn(){var n=Object(p.a)(["\n    height: 100%;\n    background: linear-gradient(-90deg, #7159c1, #ab59c1);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return cn=function(){return n},n}var un=d.c.div(cn()),ln=d.c.div(on(),Object(rn.a)(.03,"#3b9eff"));function sn(n){var e=n.children;return r.a.createElement(un,null,r.a.createElement(ln,null,e))}var pn=t(87),dn=t.n(pn),bn=t(53),fn=t(55),mn=t(75),hn=t(128),gn=t(127),vn=t(73),xn=t(88),En=t.n(xn);function On(){var n=Object(p.a)(["\n        &::after {\n            content: '';\n            display: inline-block;\n            width: 8px;\n            height: 8px;\n            background: #ff892e;\n            border-radius: 50px;\n        }\n    "]);return On=function(){return n},n}function jn(){var n=Object(p.a)(["\n    color: #FFF;\n\n    & + div {\n        margin-top: 15px;\n        padding-top: 15px;\n        border-top: 1px solid rgba(255, 255, 255, 0.1)\n    }\n\n    p {\n        font-size: 13px;\n        line-height: 18px;\n    }\n\n    time {\n        font-size: 12px;\n        opacity: 0.6;\n    }\n\n    button {\n        font-size: 12px;\n        padding: 0 5px;\n        margin: 0 5px;\n        border: 0;\n        background: none;\n        color: ",";\n        border-left: 1px solid rgba(255, 255, 255, 0.1)\n    }\n\n    ","\n\n"]);return jn=function(){return n},n}function yn(){var n=Object(p.a)(["\n    max-height: 260px;\n    padding: 5px 15px;\n"]);return yn=function(){return n},n}function wn(){var n=Object(p.a)(["\n    position: absolute;\n    width: 260px;\n    left: calc(50% - 130px);\n    top: calc(100% + 30px);\n    background: rgba(0, 0, 0, 0.6);\n    border-radius: 4px;\n    padding: 15px 5px;\n    display: ",";\n    z-index: 2;\n\n    &::before {\n        content: '';\n        position: absolute;\n        left: calc(50% - 20px);\n        top: -20px;\n        width: 0;\n        height: 0;\n        border-left: 20px solid transparent;\n        border-right: 20px solid transparent;\n        border-bottom: 20px solid rgba(0, 0, 0, 0.6)\n    }\n"]);return wn=function(){return n},n}function kn(){var n=Object(p.a)(["\n        &::after {\n            position: absolute;\n            right: 0;\n            top: 0;\n            width: 8px;\n            height: 8px;\n            background: #ff892e;\n            content: '';\n            border-radius: 50%;\n        }\n    "]);return kn=function(){return n},n}function Sn(){var n=Object(p.a)(["\n    position: relative;\n    border: 0;\n    background: none;\n\n    ","\n"]);return Sn=function(){return n},n}function _n(){var n=Object(p.a)(["\n    position: relative;\n"]);return _n=function(){return n},n}var In=d.c.div(_n()),Un=d.c.button(Sn(),(function(n){return n.hasUnread&&Object(d.b)(kn())})),Fn=d.c.div(wn(),(function(n){return n.visible?"block":"none"})),Pn=Object(d.c)(En.a)(yn()),Rn=d.c.div(jn(),Object(rn.b)(.2,"#7159c1"),(function(n){return n.unread&&Object(d.b)(On())}));function Nn(){var n=Object(a.useState)(!1),e=Object(fn.a)(n,2),t=e[0],o=e[1],c=Object(a.useState)([]),i=Object(fn.a)(c,2),u=i[0],l=i[1],s=Object(a.useMemo)((function(){return u.some((function(n){return!n.read}))}),[u]);function p(){return(p=Object(bn.a)(A.a.mark((function n(e){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.put("notifications/".concat(e));case 2:l(u.map((function(n){return n._id===e?Object(J.a)(Object(J.a)({},n),{},{read:!0}):n})));case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function n(){return(n=Object(bn.a)(A.a.mark((function n(){var e,t;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.get("notifications");case 2:e=n.sent,t=e.data.map((function(n){return Object(J.a)(Object(J.a)({},n),{},{timeDistance:Object(hn.a)(Object(gn.a)(n.createdAt),new Date,{addSuffix:!0,locale:vn.a})})})),l(t);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),r.a.createElement(In,null,r.a.createElement(Un,{onClick:function(){o(!t)},hasUnread:s},r.a.createElement(mn.c,{color:"#7159c1",size:20})),r.a.createElement(Fn,{visible:t},r.a.createElement(Pn,null,u.map((function(n){return r.a.createElement(Rn,{key:n._id,unread:!n.read},r.a.createElement("p",null,n.content),r.a.createElement("time",null,n.timeDistance),!n.read&&r.a.createElement("button",{onClick:function(){return function(n){return p.apply(this,arguments)}(n._id)},type:"button"},"Marcar como lida"))})))))}function Tn(){var n=Object(p.a)(["\n    display: flex;\n    margin-left: 20px;\n    padding-left: 20px;\n    border-left: 1px solid #eee;\n\n    div {\n        text-align: right;\n        margin-right: 10px;\n\n        strong {\n            display: block;\n            color: #333;\n        }\n\n        a {\n            display: block;\n            margin-top: 2px;\n            font-size: 12px;\n            color: #999;\n        }\n\n    }\n    img {\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n    }\n"]);return Tn=function(){return n},n}function zn(){var n=Object(p.a)(["\n    height: 64px;\n    max-width: 900px;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    nav {\n        display: flex;\n        align-items: center;\n\n        img {\n            margin-right: 20px;\n            padding-right: 20px;\n            border-right: 1px solid #eee;\n            height: 64px;\n            width: 64px;\n        }\n\n        a {\n            font-weight: bold;\n            color: #7159c1;\n        }\n    }\n\n    aside {\n        display: flex;\n        align-items: center;\n    }\n"]);return zn=function(){return n},n}function An(){var n=Object(p.a)(["\n    background: #fff;\n    padding:0 30px;\n"]);return An=function(){return n},n}var Gn=d.c.div(An()),Cn=d.c.div(zn()),Dn=d.c.div(Tn());function Ln(){var n=Object(l.c)((function(n){return n.user.profile}));return r.a.createElement(Gn,null,r.a.createElement(Cn,null,r.a.createElement("nav",null,r.a.createElement("img",{src:dn.a,alt:"GoBarber"}),r.a.createElement(h.a,{to:"/dashboard"},"DASHBOARD")),r.a.createElement("aside",null,r.a.createElement(Nn,null),r.a.createElement(Dn,null,r.a.createElement("div",null,r.a.createElement("strong",null,n.name),r.a.createElement(h.a,{to:"/profile"},"Meu perfil")),r.a.createElement("img",{src:n.avatar&&n.avatar.url||"https://api.adorable.io/avatars/50/abott@adorable.png",alt:n.name})))))}function Qn(){var n=Object(p.a)(["\n    height: 100%;\n    background: linear-gradient(-90deg, #7159c1, #ab59c1);\n"]);return Qn=function(){return n},n}var Bn=d.c.div(Qn());function qn(n){var e=n.children;return r.a.createElement(Bn,null,r.a.createElement(Ln,null),e)}function Mn(n){var e=n.component,t=n.isPrivate,a=void 0!==t&&t,o=Object(w.a)(n,["component","isPrivate"]),c=tn.getState().auth.signed;if(!c&&a)return r.a.createElement(s.a,{to:"/"});if(c&&!a)return r.a.createElement(s.a,{to:"/dashboard"});var i=c?qn:sn;return r.a.createElement(s.b,Object.assign({},o,{render:function(n){return r.a.createElement(i,null,r.a.createElement(e,n))}}))}function Hn(){return r.a.createElement(s.d,null,r.a.createElement(Mn,{path:"/",exact:!0,component:y}),r.a.createElement(Mn,{path:"/register",component:r.a.lazy((function(){return t.e(6).then(t.bind(null,132))}))}),r.a.createElement(Mn,{path:"/dashboard",component:r.a.lazy((function(){return Promise.all([t.e(3),t.e(4)]).then(t.bind(null,143))})),isPrivate:!0}),r.a.createElement(Mn,{path:"/profile",component:r.a.lazy((function(){return t.e(5).then(t.bind(null,141))})),isPrivate:!0}),r.a.createElement(Mn,{path:"/",component:function(){return r.a.createElement("h1",null,"404")}}))}Mn.defaultProps={isPrivate:!1};t(121),t(122);function Jn(){var n=Object(p.a)(["\n    @import url('https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap');\n\n    * {\n        margin: 0;\n        padding: 0;\n        outline: 0;\n        box-sizing: border-box;\n    }\n\n    *:focus {\n        outline: 0;\n    }\n\n    html, body, #root {\n        height: 100%;\n    }\n\n    body {\n        -webkit-font-smoothing: antialiased;\n    }\n\n    body, input, button {\n        font: 14px 'Roboto', sans-serif;\n    }\n\n    a {\n        text-decoration: none;\n    }\n\n    ul {\n        list-style: none\n    }\n\n    button {\n        cursor: pointer;\n    }\n"]);return Jn=function(){return n},n}var Yn=Object(d.a)(Jn());var Kn=function(){return r.a.createElement(l.a,{store:tn},r.a.createElement(u.a,{persistor:an},r.a.createElement(s.c,{history:L},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(m,null)},r.a.createElement(Hn,null)),r.a.createElement(Yn,null),r.a.createElement(i.a,{autoClose:3e3}))))};c.a.render(r.a.createElement(Kn,null),document.getElementById("root"))},22:function(n,e,t){"use strict";var a=t(86),r=t.n(a).a.create({baseURL:"https://potfolio.redirectme.net"});e.a=r},35:function(n,e,t){"use strict";function a(n,e){return{type:"@auth/SIGN_IN_REQUEST",payload:{email:n,password:e}}}function r(n,e){return{type:"@auth/SIGN_IN_SUCCESS",payload:{token:n,user:e}}}function o(n,e,t){return{type:"@auth/SIGN_UP_REQUEST",payload:{name:n,email:e,password:t}}}function c(){return{type:"@auth/SIGN_FAILURE"}}function i(){return{type:"@auth/SIGN_OUT"}}t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return r})),t.d(e,"e",(function(){return o})),t.d(e,"a",(function(){return c})),t.d(e,"d",(function(){return i}))},56:function(n,e,t){"use strict";function a(n){return{type:"@user/UPDATE_PROFILE_REQUEST",payload:{data:n}}}function r(n){return{type:"@user/UPDATE_PROFILE_SUCCESS",payload:{profile:n}}}function o(){return{type:"@user/UPDATE_PROFILE_FAILURE"}}t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return r})),t.d(e,"a",(function(){return o}))},64:function(n,e,t){n.exports=t.p+"static/media/logo.291b6cc6.svg"},87:function(n,e,t){n.exports=t.p+"static/media/purple-logo.3276c2f6.svg"},91:function(n,e,t){n.exports=t(123)}},[[91,1,2]]]);
//# sourceMappingURL=main.ff843157.chunk.js.map