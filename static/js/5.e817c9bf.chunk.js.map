{"version":3,"sources":["pages/Profile/AvatarInput/styles.js","pages/Profile/AvatarInput/index.js","pages/Profile/styles.js","pages/Profile/index.js"],"names":["Container","styled","div","AvatarInput","useField","defaultValue","registerField","useState","id","file","setFile","url","preview","setPreview","ref","useRef","e","a","data","FormData","append","target","files","api","post","response","useEffect","current","name","path","htmlFor","src","alt","type","accept","data-file","onChange","darken","Profile","dispatch","useDispatch","profile","useSelector","state","user","initialData","onSubmit","updateProfileRequest","placeholder","onClick","signOut"],"mappings":"6rBAEO,IAAMA,EAAYC,IAAOC,IAAV,KCIP,SAASC,IAAe,IAAD,EACMC,YAAS,UAAzCC,EAD0B,EAC1BA,aAAcC,EADY,EACZA,cADY,EAGVC,mBAASF,GAAgBA,EAAaG,IAH5B,mBAG3BC,EAH2B,KAGrBC,EAHqB,OAIJH,mBAASF,GAAgBA,EAAaM,KAJlC,mBAI3BC,EAJ2B,KAIlBC,EAJkB,KAM5BC,EAAMC,mBANsB,4CAkBlC,WAA4BC,GAA5B,uBAAAC,EAAA,6DACUC,EAAO,IAAIC,UAEZC,OAAO,OAAQJ,EAAEK,OAAOC,MAAM,IAHvC,SAK2BC,IAAIC,KAAK,QAASN,GAL7C,OAKUO,EALV,SAOwBA,EAASP,KAArBV,EAPZ,EAOYA,GAAIG,EAPhB,EAOgBA,IAEZD,EAAQF,GACRK,EAAWF,GAVf,4CAlBkC,sBA+BlC,OAvBAe,qBAAU,WACFZ,EAAIa,SACJrB,EAAc,CACVsB,KAAM,YACNd,IAAKA,EAAIa,QACTE,KAAM,mBAGf,CAACf,EAAKR,IAgBL,kBAACN,EAAD,KACI,2BAAO8B,QAAQ,UACX,yBAAKC,IAAKnB,GAAW,wDAAyDoB,IAAI,KAElF,2BACIC,KAAK,OACLzB,GAAG,SACH0B,OAAO,UACPC,YAAW1B,EACX2B,SAzCkB,4CA0ClBtB,IAAKA,M,izDC7ClB,IAAMd,EAAYC,IAAOC,IAAV,IAiDQmC,YAAO,IAAM,WA8BjBA,YAAO,IAAM,YC1ExB,SAASC,IACpB,IAAMC,EAAWC,cAEXC,EAAUC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,KAAKH,WAUhD,OACI,kBAAC,EAAD,KACI,kBAAC,IAAD,CAAMI,YAAaJ,EAASK,SAVpC,SAAsB5B,GAClBqB,EAASQ,YAAqB7B,MAUtB,kBAACf,EAAD,CAAayB,KAAK,cAClB,kBAAC,IAAD,CAAOA,KAAK,OAAOoB,YAAY,SAC/B,kBAAC,IAAD,CAAOf,KAAK,QAAQL,KAAK,QAAQoB,YAAY,6BAE7C,6BAEA,kBAAC,IAAD,CAAOf,KAAK,WAAWL,KAAK,cAAcoB,YAAY,gBACtD,kBAAC,IAAD,CAAOf,KAAK,WAAWL,KAAK,WAAWoB,YAAY,eACnD,kBAAC,IAAD,CAAOf,KAAK,WAAWL,KAAK,kBAAkBoB,YAAY,yBAE1D,4BAAQf,KAAK,UAAb,qBAEJ,4BAAQgB,QAnBhB,WACIV,EAASW,gBAkB2BjB,KAAK,UAArC,qBApCZ","file":"static/js/5.e817c9bf.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nexport const Container = styled.div`\n    align-self: center;\n    margin-bottom: 30px;\n\n    label {\n        cursor: pointer;\n\n        &:hover {\n            opacity: 0.7;\n        }\n\n        img {\n            height: 120px;\n            width: 120px;\n            border-radius: 50%;\n            border: 3px solid #fff;\n            background: #eee;\n        }\n\n        input {\n            display: none;\n        }\n    }\n`;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useField } from '@rocketseat/unform';\nimport api from 'services/api';\n\nimport { Container } from './styles';\n\nexport default function AvatarInput() {\n    const { defaultValue, registerField } = useField('avatar');\n\n    const [file, setFile] = useState(defaultValue && defaultValue.id);\n    const [preview, setPreview] = useState(defaultValue && defaultValue.url);\n\n    const ref = useRef();\n\n    useEffect(() => {\n        if (ref.current) {\n            registerField({\n                name: 'avatar_id',\n                ref: ref.current,\n                path: 'dataset.file',\n            });\n        }\n    }, [ref, registerField]);\n\n    async function handleChange(e) {\n        const data = new FormData();\n\n        data.append('file', e.target.files[0]);\n\n        const response = await api.post('files', data);\n\n        const { id, url } = response.data;\n\n        setFile(id);\n        setPreview(url);\n    }\n\n    return (\n        <Container>\n            <label htmlFor=\"avatar\">\n                <img src={preview || 'https://api.adorable.io/avatars/50/abott@adorable.png'} alt=\"\" />\n\n                <input\n                    type=\"file\"\n                    id=\"avatar\"\n                    accept=\"image/*\"\n                    data-file={file}\n                    onChange={handleChange}\n                    ref={ref}\n                />\n            </label>\n        </Container>\n    );\n}\n","import styled from 'styled-components';\nimport { darken } from 'polished';\n\nexport const Container = styled.div`\n    max-width: 600px;\n    margin: 50px auto;\n\n    form {\n        display: flex;\n        flex-direction: column;\n        margin-top: 30px;\n\n        hr {\n            border: 0;\n            height: 1px;\n            background: rgba(255, 255, 255, 0.2);\n            margin: 10px 0 20px;\n        }\n\n        input {\n            background: rgba(0, 0, 0, 0.1);\n            border: 0;\n            border-radius: 4px;\n            height: 44px;\n            padding: 0 15px;\n            color: #FFF;\n            margin: 0 0 10px;\n\n            &::placeholder {\n                color: rgba(255, 255, 255, 0.7);\n            }\n        }\n\n        span {\n            color: #fb6f91;\n            align-self: flex-start;\n            margin: 0 0 10px;\n            font-weight: bold;\n        }\n\n        button {\n            margin: 5px 0 0;\n            height: 44px;\n            background: #3b9eff;\n            font-weight: bold;\n            color: #FFF;\n            border: 0;\n            border-radius: 4px;\n            font-size: 16px;\n            transition: backgound 0.2s;\n\n            &:hover {\n                background: ${darken(0.03, '#3b9eff')}\n            }\n\n        }\n\n        a {\n            color: #FFF;\n            margin-top: 15px;\n            font-size: 16px;\n            opacity: 0.8;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    > button {\n        width: 100%;\n        margin: 5px 0 0;\n        height: 44px;\n        background: #fd2046;\n        font-weight: bold;\n        color: #FFF;\n        border: 0;\n        border-radius: 4px;\n        font-size: 16px;\n        transition: backgound 0.2s;\n\n        &:hover {\n            background: ${darken(0.08, '#fd2046')}\n        }\n\n    }\n`;\n","import React from 'react';\nimport { Form, Input } from '@rocketseat/unform';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateProfileRequest } from 'store/modules/user/actios';\nimport { signOut } from 'store/modules/auth/actions';\nimport AvatarInput from './AvatarInput';\nimport { Container } from './styles';\n\nexport default function Profile() {\n    const dispatch = useDispatch();\n\n    const profile = useSelector(state => state.user.profile);\n\n    function handleSubmit(data) {\n        dispatch(updateProfileRequest(data));\n    }\n\n    function handleSignout() {\n        dispatch(signOut());\n    }\n\n    return (\n        <Container>\n            <Form initialData={profile} onSubmit={handleSubmit}>\n                <AvatarInput name=\"avatar_id\" />\n                <Input name=\"name\" placeholder=\"Nome\" />\n                <Input type=\"email\" name=\"email\" placeholder=\"Seu endereÃ§o de email\" />\n\n                <hr />\n\n                <Input type=\"password\" name=\"oldPassword\" placeholder=\"Senha atual\" />\n                <Input type=\"password\" name=\"password\" placeholder=\"Nova senha\" />\n                <Input type=\"password\" name=\"confirmPassword\" placeholder=\"Confirmar nova senha\" />\n\n                <button type=\"submit\">Atualizar perfil</button>\n            </Form>\n            <button onClick={handleSignout} type=\"button\">Sair do GoBarber</button>\n        </Container>\n    );\n}\n"],"sourceRoot":""}